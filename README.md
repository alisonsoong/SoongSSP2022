--------------------------------------------------------------------------------------------
Orbital Determination Code, SSP 2022
--------------------------------------------------------------------------------------------

Name: Alison Soong
Date: July 21, 2022
Asteroid: 1999 GJ2
Team: Team 01 - Glacier
Teammates: Tyler Chen, Anoushka Chitnis, Sam Kleiman

--------------------------------------------------------------------------------------------
API
--------------------------------------------------------------------------------------------

View the API for the OD code using pdoc

Instructions:

   Option 1:
   
   - Install pdoc (https://pypi.org/project/pdoc/) using pip
   - Download SoongSSP2022 folder
   - Open up Terminal
   - Navigate to the directory
   - Type the following:
        
        pdoc --http localhost:XXXX odlib.py
        
        (where XXXX is any four digit number)
        
   - If the local host number is already being used, 
     pick another four digit number
   - Open link in web browser
     
   Option 2:
   
   - After installing pdoc, downloading the SoongSSP2022 folder,
     opening Terminal, navigating to the directory, type exactly:
     
        pdoc --http localhost:1111 odlib.py
        
        (note how the four digit number is specifically 1111)
        
   - Open the folder and open the html file 
   
        odlib API documentation.html
        
     This should open a web browser
      
--------------------------------------------------------------------------------------------
Determine Orbital Elements
--------------------------------------------------------------------------------------------

Generate the orbital elements for 1999 GJ2 (or any asteroid) in only a few steps!

Steps to run RunCompleteOD(), which will generate the orbital elements, run a Monte Carlo 
simulation, and generate an ephemeris:
    
    Step 1) Download SoongSSP2022 to Desktop
    Step 2) Change files in input and fits folders as needed
    Step 3) Open ODCodeFinal.ipynb
    Step 4) Change file paths and other input information

-- STEP 1 : DOWNLOAD --

Download SoongSSP2022 to Desktop.

-- STEP 2 : FILES --

INPUT

Three files with input information are required to run this program. 

--> SoongInput.txt

    Holds all data collected for the asteroid whose orbit will 
    be determined with this program. The formatting is as follows:
        
        The first line is the key:
            
            JDTDB, Calendar Date, RA, Dec, RX, RY, RZ,
            
        Subsequent lines include comma separated values that correspond to the key:
        
        JDTDB = Time in Julian days (XXXXXXX.XXXX, as many significant figures as possible)
        Calendar Date = Date and Time (YYYY-MM-DD XX:XX:XX.XXX)
        RA = Right Ascension (XX:XX:XX.XX)
        Dec = Declination (+/-XX:XX:XX.X)
        RX, RY, RZ = Sun position components.
            
            Generate the sun positions in JPL Horizons 
            (https://ssd.jpl.nasa.gov/horizons/app.html#/) using
            the following settings:

                Ephemeris Type: Vector Table
                Target Body: Sun [Sol] 
                Coordinate Center: Sommers-Bausch Observatory, Boulder [code: 463] 
                Reference Plance Equatorial-aligned
                Vector Correction: apparent states
                Output Units: au and days
                CSV Format <-- IMPORTANT
                (Everything else should be default)
                
        Example: (one line of data, should be in exactly one line following the key)
            
            2459758.6819656, 2022-06-28 04:22:01.830, 16:29:13.66, +11:49:48.9, 
            -1.093326865083951E-01,  9.273537237996555E-01,  4.019653636246575E-01, 

--> 1999GJ2SunPos.txt

    Holds data of times and corresponding Sun position relative to Earth. Each line/time 
    will be used in ephemeris generation.
    
    Generate the data in JPL Horizons (https://ssd.jpl.nasa.gov/horizons/app.html#/) using
    the following settings:
    
        Ephemeris Type: Vector Table
        Target Body: Sun [Sol] 
        Coordinate Center: Sommers-Bausch Observatory, Boulder [code: 463] 
        Reference Plance Equatorial-aligned
        Vector Correction: apparent states
        Output Units: au and days
        CSV Format <-- IMPORTANT
        (Everything else should be default)
        
    Copy and paste the results into 1999GJ2SunPos.txt. 
    
    NOTE: Data should start on line 2! The first line of the file should be the following: 
        
        JDTDB, Calendar Date (TDB), X, Y, Z, VX, VY, VZ, LT, RG, RR,
        
--> ActualEphemeris.txt

    Holds the actual ephemeris as generated by JPL Horizons. The dates corresponding to each
    result must match (and be in the correct order) as the dates in the sun position input file.
    
    Generate the data in JPL Horizons (https://ssd.jpl.nasa.gov/horizons/app.html#/) using
    the following settings:
    
        Ephemeris Type: Observer Table
        Target Body: 66251 (1999 GJ2) 
        Observer Location: Sommers-Bausch Observatory, Boulder [code: 463]
        Observer Table Settings: only (1) Astrometric RA & DEC
        Angle Format: Sexagesimal Format (hours/degrees minutes seconds)
        Range Units: Astronomical Units
        CSV Format <-- IMPORTANT
        (Everything else should be default)
        
    Copy and paste the results into ActualEphemeris.txt. 
    
    NOTE: Data should start on line 2! The first line of the file should be the following: 
        
        Date__(UT)__HR:MN:SC.fff, , , R.A._(ICRF), DEC__(ICRF),
    
FITS

Navigate to SoongSSP2022/fits. Three fits files should be in this folder:

    - they will be used for the Monte Carlo simulation
    - they must be the three observation images that correspond to the 
      images used to find the measured right ascension and declination for 
      orbital elements determination
    - rename to MMDD.fits (Month and Day)

-- STEP 3 : OPEN --

Open the Jupyter Notebook, ODCodeFinal.ipynb.

-- STEP 4 : INPUT --

The following input values must be changed in ODCodeFinal.ipynb:

1) Input File Path

    Set inputFile to a string: the path to the SoongInput.txt file
    
    Example: 
    
        inputFile="/home/soonali/Desktop/SoongSSP2022/input/SoongInput.txt"

2) Dates Selected for Orbital Elements Determination
    
    Set dates to a list of strings: the dates (which must exactly match the dates in the 
    SoongInput.txt file) in increasing order of time
    
    Example: 
    
        dates=['2022-06-28 04:33:44.089','2022-07-12 04:16:40.826','2022-07-14 04:41:39.025']

3) Results from JPL horizons in the following format: [a,e,i,o,w,m,T]
    
    Set results to a list of floats: must be in the format
        
        [Semi-Major Axis,
         Eccentricity,
         Inclination,
         Longitude of Ascending Node,
         Argument of Perihelion,
         Mean Anomaly,
         Time of Perihelion Passage]
    
    Example: 
    
        results=[1.535501123505049E+00, 1.980131722243141E-01, 1.127908127242095E+01, 
                 1.961976310756240E+02, 1.425325538303718E+02, 3.163937598615976E+02, 
                 2459856.859881772194] # Results for 2022-07-12 04:16:40.826 

4) Path for file containing times and sun positions for ephemeris generation

    Set sunFile to a string: the path to the 1999GJ2SunPos.txt file

    Example: 
    
        sunFile="/home/soonali/Desktop/SoongSSP2022/input/1999GJ2SunPos.txt"
        
5) Path for file containing actual ephemeris generated by JPL Horizons

    Set actualEph to a string: the path to the ActualEphemeris.txt file
    
    NOTE: Substitute with an empty string if no error calculation is desired

    Example: 
    
        actualEph="/home/soonali/Desktop/SoongSSP2022/input/ActualEphemeris.txt"

6) Number of iterations for Monte Carlo

    Set iterations to an integer: the number of times to run Monte Carlo simulation

    Example: 
    
        iterations=10000 

67 Fits Files Path
    
    Set fitsFiles to a list of strings: the file paths to the fits files in order of
    increasing observation dates/times
    
    Example: 
    
        fitsFiles=["/home/soonali/Desktop/SoongSSP2022/fits/0628.fits", 
                   "/home/soonali/Desktop/SoongSSP2022/fits/0712.fits", 
                   "/home/soonali/Desktop/SoongSSP2022/fits/0714.fits"]

-- Finally, run first cell in ODCodeFinal.ipynb --

Use the following line of code to run:
    
    RunCompleteOD(iterations, inputFile, fitsFiles, sunFile, dates, results, actualEph)

The files generated are as follows:

    SoongODResults.txt (The orbital elements determination)
    SoongGeneratedEphemeris.txt (Generated ephemeris for all inputted sun positions)
    SoongMonteCarloOutput.txt (Numerical results from Monte Carlo simulation)
    
The following results are printed in the Jupyter Notebook:

    Results from orbital elements determination
    Results from Monte Carlo simulation (6 orbital elements, their histograms, and their
        errors and standard deviations of mean)

--------------------------------------------------------------------------------------------
Ephemeris Generation
--------------------------------------------------------------------------------------------

Steps to run GenerateEphemeris((), which will generate an ephemeris:
    
    Step 1) Download SoongSSP2022 to Desktop
    Step 2) Change files in input and fits folders as needed
    Step 3) Open ODCodeFinal.ipynb
    Step 4) Change file paths
    
-- STEP 1 : DOWNLOAD --

Download SoongSSP2022 to Desktop.

-- STEP 2 : FILES --

INPUT

Two files with input information are required to run this program. 

--> SoongInput.txt

    Holds all data collected for the asteroid whose orbit will 
    be determined with this program. The formatting is as follows:
        
        The first line is the key:
            
            JDTDB, Calendar Date, RA, Dec, RX, RY, RZ,
            
        Subsequent lines include comma separated values that correspond to the key:
        
        JDTDB = Time in Julian days (XXXXXXX.XXXX, as many significant figures as possible)
        Calendar Date = Date and Time (YYYY-MM-DD XX:XX:XX.XXX)
        RA = Right Ascension (XX:XX:XX.XX)
        Dec = Declination (+/-XX:XX:XX.X)
        RX, RY, RZ = Sun position components.
            
            Generate the sun positions in JPL Horizons 
            (https://ssd.jpl.nasa.gov/horizons/app.html#/) using
            the following settings:

                Ephemeris Type: Vector Table
                Target Body: Sun [Sol] 
                Coordinate Center: Sommers-Bausch Observatory, Boulder [code: 463] 
                Reference Plance Equatorial-aligned
                Vector Correction: apparent states
                Output Units: au and days
                CSV Format <-- IMPORTANT
                (Everything else should be default)
                
        Example: (one line of data, should be in exactly one line following the key)
            
            2459758.6819656, 2022-06-28 04:22:01.830, 16:29:13.66, +11:49:48.9, 
            -1.093326865083951E-01,  9.273537237996555E-01,  4.019653636246575E-01, 

--> 1999GJ2SunPos.txt

    Holds data of times and corresponding Sun position relative to Earth. Each line/time 
    will be used in ephemeris generation.
    
    Generate the data in JPL Horizons (https://ssd.jpl.nasa.gov/horizons/app.html#/) using
    the following settings:
    
        Ephemeris Type: Vector Table
        Target Body: Sun [Sol] 
        Coordinate Center: Sommers-Bausch Observatory, Boulder [code: 463] 
        Reference Plance Equatorial-aligned
        Vector Correction: apparent states
        Output Units: au and days
        CSV Format <-- IMPORTANT
        (Everything else should be default)
        
    Copy and paste the results into 1999GJ2SunPos.txt. 
    
    NOTE: Data should start on line 2! The first line of the file should be the following: 
        
        JDTDB, Calendar Date (TDB), X, Y, Z, VX, VY, VZ, LT, RG, RR,

--> ActualEphemeris.txt

    Holds the actual ephemeris as generated by JPL Horizons. The dates corresponding to each
    result must match (and be in the correct order) as the dates in the sun position input file.
    
    Generate the data in JPL Horizons (https://ssd.jpl.nasa.gov/horizons/app.html#/) using
    the following settings:
    
        Ephemeris Type: Observer Table
        Target Body: 66251 (1999 GJ2) 
        Observer Location: Sommers-Bausch Observatory, Boulder [code: 463]
        Observer Table Settings: only (1) Astrometric RA & DEC
        Angle Format: Sexagesimal Format (hours/degrees minutes seconds)
        Range Units: Astronomical Units
        CSV Format <-- IMPORTANT
        (Everything else should be default)
        
    Copy and paste the results into ActualEphemeris.txt. 
    
    NOTE: Data should start on line 2! The first line of the file should be the following: 
        
        Date__(UT)__HR:MN:SC.fff, , , R.A._(ICRF), DEC__(ICRF),

-- STEP 3 : OPEN --

Open the Jupyter Notebook, ODCodeFinal.ipynb.

-- STEP 4 : INPUT --

The following input values must be changed in ODCodeFinal.ipynb:

1) Input File Path

    Set inputFile to a string: the path to the SoongInput.txt file
    
    Example: 
    
        inputFile="/home/soonali/Desktop/SoongSSP2022/input/SoongInput.txt"

2) Dates Selected for Orbital Elements Determination
    
    Set dates to a list of strings: the dates (which must exactly match the dates in the 
    SoongInput.txt file) in increasing order of time
    
    Example: 
    
        dates=['2022-06-28 04:33:44.089','2022-07-12 04:16:40.826','2022-07-14 04:41:39.025']

3) Path for file containing times and sun positions for ephemeris generation

    Set sunFile to a string: the path to the 1999GJ2SunPos.txt file

    Example: 
    
        sunFile="/home/soonali/Desktop/SoongSSP2022/input/1999GJ2SunPos.txt"
        
4) Path for file containing actual ephemeris generated by JPL Horizons

    Set actualEph to a string: the path to the ActualEphemeris.txt file
    
    NOTE: Substitute with an empty string if no error calculation is desired

    Example: 
    
        actualEph="/home/soonali/Desktop/SoongSSP2022/input/ActualEphemeris.txt"

-- Finally, run in the Jupyter Notebook --

Use the following line of code to run:
    
    GenerateEphemeris(inputFile, dates, sunFile, actualEph)

Results are generated in the following document in the SoongSSP2022 folder:

    GeneratedEphemeris.txt (Generated ephemeris for all inputted sun positions)


